#!/bin/sh
set -e

TARGET_USER=<%= @options[:user] %>
EXEC="<%= @options[:exec_file] %>"
CLIEXEC="<%= @options[:cliexec_file] %>"
PIDFILE="<%= @options[:pidfile] %>"
CONF="<%= @options[:config] %>"

start(){
    if [ -f $PIDFILE ]
    then
        echo "$PIDFILE exists, process is already running or crashed"
    else
        echo "Starting Redis server..."
        $EXEC $CONF
    fi
}

exec 2>&1
exec <%= @options[:exec_file] %> <%= @options[:config] %>